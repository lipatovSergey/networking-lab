## Урок 7 — DNS: как на самом деле работают доменные имена

В этом уроке я сосредоточился на понимании **DNS как системы разрешения имён**, а не как сетевого или транспортного механизма.

DNS отвечает только за **сопоставление доменного имени с IP-адресом**.
Он не маршрутизирует трафик, не передаёт данные и не участвует в работе TCP, TLS или HTTP.

---

### Что на самом деле делает DNS

Когда клиент запрашивает доменное имя, DNS отвечает на вопрос:

> «Какой IP-адрес соответствует этому имени?»

После получения IP-адреса DNS больше не участвует в процессе.
Всё дальнейшее взаимодействие происходит напрямую с IP-адресом по TCP/HTTPS.

---

### Записи A и CNAME

**A-запись** напрямую связывает доменное имя с IP-адресом.

**CNAME-запись** связывает одно доменное имя с другим доменным именем (алиасом), а не с IP.

Разрешение CNAME полностью выполняется **рекурсивным DNS-резолвером**.
Клиент отправляет один DNS-запрос и получает финальный ответ, в котором уже содержится IP-адрес.

Клиент не обрабатывает CNAME самостоятельно и не выполняет дополнительных DNS-запросов из-за него.

---

### Зачем CNAME используется на практике

CNAME-записи обычно применяются для:

- передачи управления IP-адресами облачным или CDN-провайдерам
- изменения инфраструктуры без необходимости менять конфигурацию клиентов
- упрощения управления DNS для множества поддоменов
- поддержки динамических IP и географической балансировки нагрузки

CNAME — это архитектурное и операционное решение, а не приём для оптимизации производительности.

---

### DNS и маршрутизация

DNS занимается **разрешением имён в IP-адреса**.
Маршрутизация определяет **как пакеты доходят до этого IP-адреса**.

Инструменты вроде `dig` используются для анализа DNS.
Инструменты вроде `traceroute` — для наблюдения за сетевым маршрутом до IP-адреса.

Это разные уровни ответственности, и их нельзя путать.

---

### Ключевой вывод

DNS — это **система имён**, а не система передачи данных.
CNAME — это механизм алиасов внутри DNS.
После получения IP-адреса DNS больше не участвует в жизненном цикле запроса.
